# BAGS Platform Bot Configuration - ЖЁСТКИЕ ФИЛЬТРЫ
# Покупаем ТОЛЬКО токены с сильными паттернами и высоким скором
# НЕ СМЯГЧАТЬ ЭТИ НАСТРОЙКИ!

enabled: true
env_file: .env
name: bot-sniper-bags
platform: bags
separate_process: true

# Connection settings - HELIUS для HTTP, публичный Solana для WSS
rpc_endpoint: ${SOLANA_NODE_RPC_ENDPOINT}
wss_endpoint: ${SOLANA_NODE_WSS_ENDPOINT}
private_key: ${SOLANA_PRIVATE_KEY}

# Listener configuration - ВАЖНО: для bags.fm используем bags_logs!
# PumpPortal НЕ поддерживает bags.fm токены.
filters:
  listener_type: bags_logs  # Специализированный listener для Meteora DBC
  max_token_age: 315360000  # 10 лет в секундах
  yolo_mode: true
  match_string: null
  bro_address: null

# PumpPortal WebSocket
pumpportal:
  url: wss://pumpportal.fun/api/data

# Trading parameters
# ============================================
# ЖЁСТКИЙ STOP LOSS - КРИТИЧЕСКИ ВАЖНО!
# В коде есть ДОПОЛНИТЕЛЬНАЯ защита:
# - HARD_STOP_LOSS: 25% убыток = НЕМЕДЛЕННАЯ продажа
# - EMERGENCY_STOP_LOSS: 40% убыток = ЭКСТРЕННАЯ продажа
# - Агрессивный retry при неудачной продаже (5 попыток)
# ============================================
trade:
  buy_amount: 0.01
  buy_slippage: 0.3
  sell_slippage: 0.35              # Увеличен slippage для быстрой продажи
  exit_strategy: tp_sl
  max_hold_time: 86400
  min_sol_balance: 0.03
  moon_bag_percentage: 50           # НЕТ moon bag при SL! Продаём ВСЁ!
  price_check_interval: 1          # КАЖДУЮ СЕКУНДУ проверяем цену!
  stop_loss_percentage: 0.20       # 20% SL (в коде есть доп. защита на 25% и 40%)
  take_profit_percentage: 1.0

# Priority fees
priority_fees:
  enable_dynamic: false
  enable_fixed: true
  fixed_amount: 500000

# ============================================
# PATTERN DETECTION - МАКСИМАЛЬНО ЖЁСТКИЕ ФИЛЬТРЫ
# НЕ СМЯГЧАТЬ! Покупаем только при СИЛЬНЫХ сигналах!
# ============================================
pattern_detection:
  enabled: true
  pattern_only_mode: true
  
  # ЖЁСТКИЕ ТРЕБОВАНИЯ
  min_patterns_to_buy: 2           # Минимум 2 паттерна ОБЯЗАТЕЛЬНО
  min_signal_strength: 0.8         # 80% сила сигнала
  min_whale_buys: 2                # 2 whale покупки
  
  # Пороги паттернов - ЖЁСТКИЕ
  buy_pressure_threshold: 0.80     # 80% покупок
  trade_velocity_threshold: 500    # 500 сделок за 5 мин
  price_momentum_threshold: 0.15   # 15% рост
  volume_spike_threshold: 4.0      # 4x объём
  
  # High Volume Sideways - ЖЁСТКИЕ
  high_volume_buys_1h: 600
  high_volume_sells_1h: 350
  high_volume_alt_buys_1h: 250
  high_volume_alt_max_sells_1h: 100
  
  # EXTREME BUY PRESSURE 5min - ЖЁСТКИЕ
  extreme_buy_pressure_min_buys_5m: 1000
  extreme_buy_pressure_max_sells_5m: 100

# ============================================
# TOKEN SCORING - ОБЯЗАТЕЛЬНАЯ ПРОВЕРКА
# ============================================
scoring:
  enabled: true
  min_score: 75
  volume_weight: 30
  buy_pressure_weight: 35
  momentum_weight: 20
  liquidity_weight: 15

# ============================================
# WHALE COPY - ЖЁСТКИЕ ФИЛЬТРЫ
# ============================================
whale_copy:
  enabled: true
  wallets_file: "smart_money_wallets.json"
  min_buy_amount: 1.0
  helius_api_key: ${HELIUS_API_KEY}

# ============================================
# DEV CHECK - DISABLED to save Helius quota
# ============================================
dev_check:
  enabled: false  # DISABLED - uses too much Helius API quota!
  max_tokens_created: 10
  min_account_age_days: 3

# ============================================
# TRENDING SCANNER - ЖЁСТКИЕ ФИЛЬТРЫ
# ============================================
trending_scanner:
  enabled: true
  min_volume_1h: 100000
  min_market_cap: 25000
  max_market_cap: 0
  min_price_change_5m: 20
  min_price_change_1h: 50
  min_buy_pressure: 0.85
  scan_interval: 30
