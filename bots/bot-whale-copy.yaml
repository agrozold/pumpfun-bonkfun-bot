# WHALE COPY Bot - Копирование сделок китов
# Работает со ВСЕМИ платформами: pump_fun, lets_bonk, bags
# Покупает ТОЛЬКО когда киты покупают

enabled: true
env_file: .env
name: bot-whale-copy
platform: pump_fun  # Основная платформа, но whale copy работает универсально
separate_process: true

# Listener
filters:
  bro_address: null
  listener_type: fallback
  match_string: null
  max_token_age: 315360000  # 10 лет в секундах
  yolo_mode: true
  sniper_enabled: false  # НЕ снайпит новые токены, только копирует китов

# RPC - HELIUS для HTTP, публичный Solana для WSS
rpc_endpoint: ${SOLANA_NODE_RPC_ENDPOINT}
wss_endpoint: ${SOLANA_NODE_WSS_ENDPOINT}
private_key: ${SOLANA_PRIVATE_KEY}

# Priority fees
priority_fees:
  enable_dynamic: false
  enable_fixed: true
  fixed_amount: 500000
  max_fee: 5000000

# PumpPortal
pumpportal:
  url: wss://pumpportal.fun/api/data

# Trade settings
# ============================================
# ЖЁСТКИЙ STOP LOSS - КРИТИЧЕСКИ ВАЖНО!
# В коде есть ДОПОЛНИТЕЛЬНАЯ защита:
# - HARD_STOP_LOSS: 25% убыток = НЕМЕДЛЕННАЯ продажа
# - EMERGENCY_STOP_LOSS: 40% убыток = ЭКСТРЕННАЯ продажа
# - Агрессивный retry при неудачной продаже (5 попыток)
# ============================================
trade:
  buy_amount: 0.01
  buy_slippage: 0.3
  exit_strategy: tp_sl
  max_hold_time: 86400
  min_sol_balance: 0.03
  moon_bag_percentage: 50           # НЕТ moon bag при SL! Продаём ВСЁ!
  price_check_interval: 1          # КАЖДУЮ СЕКУНДУ проверяем цену!
  sell_slippage: 0.35              # Увеличен slippage для быстрой продажи
  stop_loss_percentage: 0.20       # 20% SL (в коде есть доп. защита на 25% и 40%)
  # Trailing Stop-Loss (TSL)
  tsl_enabled: true
  tsl_activation_pct: 0.20
  tsl_trail_pct: 0.10
  tsl_sell_pct: 0.50
  take_profit_percentage: 1.0

# ============================================
# PATTERN DETECTION - ОТКЛЮЧЕНО для whale copy
# Whale copy сам по себе является фильтром
# ============================================
pattern_detection:
  enabled: false

# ============================================
# TOKEN SCORING - ЖЁСТКИЕ ФИЛЬТРЫ
# Whale copy теперь ОБЯЗАТЕЛЬНО проверяет scoring!
# Это предотвращает покупку мусора даже если кит купил
# ============================================
scoring:
  enabled: true
  min_score: 75
  volume_weight: 30
  buy_pressure_weight: 35
  momentum_weight: 20
  liquidity_weight: 15

# ============================================
# WHALE COPY - ОСНОВНОЙ РЕЖИМ
# Покупаем ТОЛЬКО когда киты покупают
# ============================================
whale_copy:
  enabled: true
  wallets_file: "smart_money_wallets.json"
  min_buy_amount: 0.5  # Минимум 0.5 SOL покупка кита
  helius_api_key: ${HELIUS_API_KEY}

# ============================================
# DEV CHECK - DISABLED to save Helius quota
# ============================================
dev_check:
  enabled: false  # DISABLED - uses too much Helius API quota!
  max_tokens_created: 20
  min_account_age_days: 1

# ============================================
# TRENDING SCANNER - ОТКЛЮЧЕНО для whale copy
# ============================================
trending_scanner:
  enabled: false

# ============================================
# MULTI-PLATFORM WHALE TRACKING
# ============================================
# Слушать китов на ВСЕХ платформах (pump, bonk, bags, pumpswap, raydium)
# Копирует сделки китов из smart_money_wallets.json с ЛЮБЫМИ токенами
# Игнорирует platform: pump_fun выше - слушает ВСЁ
whale_all_platforms: true

# Стейблкоины которые НЕ покупаем (игнорируем сделки китов с ними)
stablecoin_filter:
  - "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"  # USDC
  - "Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"  # USDT
  - "USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"   # USDH
  - "USDSwr9ApdHk5bvJKMjzff41FfuX8bSxdKcR81vTwcA"   # USDS
  - "2b1kV6DkPAnxd5ixfnxCpjxmKwqjjaYmCZfHsFu24GXo"  # PYUSD
  - "F3hW1kkYVXhMz9FRV8t3mEfwmLQygF7PtPSsofPCdmXR"  # USD1
  - "So11111111111111111111111111111111111111112"    # WSOL (Wrapped SOL)
